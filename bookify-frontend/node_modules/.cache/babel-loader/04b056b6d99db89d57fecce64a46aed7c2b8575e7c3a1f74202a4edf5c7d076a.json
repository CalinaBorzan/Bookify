{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Calina\\\\Desktop\\\\ANUL3\\\\sem2\\\\SD\\\\proiect\\\\bookify-frontend\\\\src\\\\pages\\\\AccountPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/AccountPage.jsx\nimport React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Wrapper = styled.div`\n  max-width: 900px;\n  margin: 3rem auto;\n  padding: 0 1rem;\n`;\n_c = Wrapper;\nconst Tabs = styled.div`\n  display: flex;\n  gap: 2rem;\n  border-bottom: 2px solid #e0e0e0;\n  margin-bottom: 2rem;\n`;\n_c2 = Tabs;\nconst Tab = styled.button`\n  background: none;\n  border: none;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  padding: 0.6rem 0;\n  color: ${p => p.active === \"true\" ? \"#175dff\" : \"#777\"};\n  border-bottom: 3px solid ${p => p.active === \"true\" ? \"#175dff\" : \"transparent\"};\n`;\n_c3 = Tab;\nconst Section = styled.div`\n  animation: fade 0.3s;\n  @keyframes fade { from { opacity: 0 } to { opacity: 1 } }\n`;\n_c4 = Section;\nconst FormGroup = styled.div`\n  margin-bottom: 1rem;\n`;\n_c5 = FormGroup;\nconst Label = styled.label`\n  display: block;\n  margin-bottom: 0.3rem;\n  color: #003b70;\n  font-weight: 600;\n`;\n_c6 = Label;\nconst Input = styled.input`\n  width: 100%;\n  padding: 0.6rem;\n  border: 1px solid #d1e0ff;\n  border-radius: 6px;\n`;\n_c7 = Input;\nconst SaveButton = styled.button`\n  padding: 0.7rem 1.5rem;\n  background: #175dff;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  &:hover { background: #004bff; }\n`;\n_c8 = SaveButton;\nconst DeleteButton = styled.button`\n  padding: 0.7rem 1.5rem;\n  background: #e92365;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  margin-left: 1rem;\n  &:hover { background: #ff6b9b; }\n`;\n_c9 = DeleteButton;\nconst BookingCard = styled.div`\n  border: 1px solid #e0e0e0;\n  border-radius: 6px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n`;\n_c0 = BookingCard;\nconst ReviewInput = styled.textarea`\n  width: 100%;\n  min-height: 80px;\n  padding: 0.5rem;\n  margin-top: 0.5rem;\n`;\n_c1 = ReviewInput;\nconst SubmitReviewButton = styled.button`\n  padding: 0.6rem 1.2rem;\n  background: #28a745;\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  margin-top: 0.5rem;\n`;\n_c10 = SubmitReviewButton;\nexport default function AccountPage() {\n  _s();\n  const [tab, setTab] = useState(\"profile\");\n  const [user, setUser] = useState(null);\n  const [bookings, setBookings] = useState([]);\n  const [reviews, setReviews] = useState({});\n  const [newReview, setNewReview] = useState({});\n  const [editUser, setEditUser] = useState({\n    email: \"\",\n    username: \"\",\n    password: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    age: \"\"\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // 1) Load current user on mount\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwt\");\n    if (!token) {\n      setError(\"No authentication token found. Redirecting to login...\");\n      setLoading(false);\n      setTimeout(() => window.location.href = \"/\", 2000);\n      return;\n    }\n    axios.get(\"/api/users/me\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      const u = res.data;\n      setUser(u);\n      setEditUser({\n        email: u.email || \"\",\n        username: u.username || \"\",\n        password: \"Current password not shown (enter new password to change)\",\n        firstName: u.firstName || \"\",\n        lastName: u.lastName || \"\",\n        age: u.age ? u.age.toString() : \"\"\n      });\n    }).catch(err => {\n      setError(`Failed to load profile: ${err.message}`);\n    }).finally(() => setLoading(false));\n  }, []);\n\n  // 2) Once we know user.id, fetch their bookings + reviews\n  useEffect(() => {\n    if (!(user !== null && user !== void 0 && user.id)) return;\n    const token = localStorage.getItem(\"jwt\");\n    axios.get(`/api/bookings/user/${user.id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setBookings(res.data);\n      // fetch reviews for each booking\n      res.data.forEach(bk => {\n        axios.get(`/api/reviews/booking/${bk.id}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        }).then(r => {\n          setReviews(prev => ({\n            ...prev,\n            [bk.id]: r.data\n          }));\n        }).catch(() => {\n          /* ignore review load failures */\n        });\n      });\n    }).catch(err => {\n      setError(`Failed to load bookings: ${err.message}`);\n    });\n  }, [user]);\n  const handleSave = () => {\n    const token = localStorage.getItem(\"jwt\");\n    const payload = {\n      email: editUser.email,\n      username: editUser.username,\n      firstName: editUser.firstName,\n      lastName: editUser.lastName,\n      age: editUser.age ? parseInt(editUser.age, 10) : undefined\n    };\n    if (editUser.password.trim() && editUser.password !== \"Current password not shown (enter new password to change)\") {\n      payload.password = editUser.password;\n    }\n    axios.patch(\"/api/users/me\", payload, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setUser(res.data);\n      alert(\"Profile updated successfully!\");\n    }).catch(err => {\n      setError(`Failed to update profile: ${err.message}`);\n    });\n  };\n  const handleDelete = () => {\n    if (!window.confirm(\"Are you sure you want to delete your account?\")) return;\n    const token = localStorage.getItem(\"jwt\");\n    axios.delete(\"/api/users/me\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(() => {\n      localStorage.removeItem(\"jwt\");\n      window.location.href = \"/\";\n    }).catch(err => {\n      setError(`Failed to delete account: ${err.message}`);\n    });\n  };\n  const handleReviewSubmit = bookingId => {\n    const token = localStorage.getItem(\"jwt\");\n    axios.post(\"/api/reviews\", {\n      bookingId,\n      comment: newReview[bookingId] || \"\",\n      rating: 5\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setReviews(prev => ({\n        ...prev,\n        [bookingId]: [res.data, ...(prev[bookingId] || [])]\n      }));\n      setNewReview(prev => ({\n        ...prev,\n        [bookingId]: \"\"\n      }));\n    }).catch(err => {\n      setError(`Failed to add review: ${err.message}`);\n    });\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 223,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"My account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n      children: [/*#__PURE__*/_jsxDEV(Tab, {\n        active: tab === \"profile\" ? \"true\" : \"false\",\n        onClick: () => setTab(\"profile\"),\n        children: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tab, {\n        active: tab === \"bookings\" ? \"true\" : \"false\",\n        onClick: () => setTab(\"bookings\"),\n        children: \"My bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"#e92365\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }, this), tab === \"profile\" && user && /*#__PURE__*/_jsxDEV(Section, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Edit details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: editUser.email,\n          onChange: e => setEditUser({\n            ...editUser,\n            email: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: editUser.username,\n          onChange: e => setEditUser({\n            ...editUser,\n            username: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"Password (enter new to change)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          value: editUser.password,\n          onChange: e => setEditUser({\n            ...editUser,\n            password: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"First Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: editUser.firstName,\n          onChange: e => setEditUser({\n            ...editUser,\n            firstName: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"Last Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: editUser.lastName,\n          onChange: e => setEditUser({\n            ...editUser,\n            lastName: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"Age\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"number\",\n          value: editUser.age,\n          onChange: e => setEditUser({\n            ...editUser,\n            age: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n        children: [/*#__PURE__*/_jsxDEV(Label, {\n          children: \"Role (read-only)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: user.role,\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(SaveButton, {\n        onClick: handleSave,\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(DeleteButton, {\n        onClick: handleDelete,\n        children: \"Delete Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }, this), tab === \"bookings\" && /*#__PURE__*/_jsxDEV(Section, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Upcoming & past trips\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this), bookings.length ? bookings.map(booking => {\n        var _booking$listing, _booking$listing2, _reviews$booking$id;\n        return /*#__PURE__*/_jsxDEV(BookingCard, {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [((_booking$listing = booking.listing) === null || _booking$listing === void 0 ? void 0 : _booking$listing.title) || \"Unknown\", \" (\", booking.type, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Check-in: \", booking.checkIn, \" | Check-out: \", booking.checkOut]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Total: \\u20AC\", ((_booking$listing2 = booking.listing) === null || _booking$listing2 === void 0 ? void 0 : _booking$listing2.price) * (booking.numGuests || 1) || \"N/A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Status: \", booking.status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ReviewInput, {\n            value: newReview[booking.id] || \"\",\n            onChange: e => setNewReview({\n              ...newReview,\n              [booking.id]: e.target.value\n            }),\n            placeholder: \"Add a review...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(SubmitReviewButton, {\n            onClick: () => handleReviewSubmit(booking.id),\n            children: \"Submit Review\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 17\n          }, this), ((_reviews$booking$id = reviews[booking.id]) === null || _reviews$booking$id === void 0 ? void 0 : _reviews$booking$id.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Reviews\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 21\n            }, this), reviews[booking.id].map(r => /*#__PURE__*/_jsxDEV(\"p\", {\n              children: r.comment\n            }, r.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 23\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 19\n          }, this)]\n        }, booking.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 15\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"You have no bookings yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this);\n}\n_s(AccountPage, \"yUts+BHr/PFZelB0A/RG8qIVLH0=\");\n_c11 = AccountPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11;\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"Tabs\");\n$RefreshReg$(_c3, \"Tab\");\n$RefreshReg$(_c4, \"Section\");\n$RefreshReg$(_c5, \"FormGroup\");\n$RefreshReg$(_c6, \"Label\");\n$RefreshReg$(_c7, \"Input\");\n$RefreshReg$(_c8, \"SaveButton\");\n$RefreshReg$(_c9, \"DeleteButton\");\n$RefreshReg$(_c0, \"BookingCard\");\n$RefreshReg$(_c1, \"ReviewInput\");\n$RefreshReg$(_c10, \"SubmitReviewButton\");\n$RefreshReg$(_c11, \"AccountPage\");","map":{"version":3,"names":["React","useState","useEffect","styled","axios","jsxDEV","_jsxDEV","Wrapper","div","_c","Tabs","_c2","Tab","button","p","active","_c3","Section","_c4","FormGroup","_c5","Label","label","_c6","Input","input","_c7","SaveButton","_c8","DeleteButton","_c9","BookingCard","_c0","ReviewInput","textarea","_c1","SubmitReviewButton","_c10","AccountPage","_s","tab","setTab","user","setUser","bookings","setBookings","reviews","setReviews","newReview","setNewReview","editUser","setEditUser","email","username","password","firstName","lastName","age","loading","setLoading","error","setError","token","localStorage","getItem","setTimeout","window","location","href","get","headers","Authorization","then","res","u","data","toString","catch","err","message","finally","id","forEach","bk","r","prev","handleSave","payload","parseInt","undefined","trim","patch","alert","handleDelete","confirm","delete","removeItem","handleReviewSubmit","bookingId","post","comment","rating","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","color","value","onChange","e","target","type","role","disabled","length","map","booking","_booking$listing","_booking$listing2","_reviews$booking$id","listing","title","checkIn","checkOut","price","numGuests","status","placeholder","_c11","$RefreshReg$"],"sources":["C:/Users/Calina/Desktop/ANUL3/sem2/SD/proiect/bookify-frontend/src/pages/AccountPage.jsx"],"sourcesContent":["// src/pages/AccountPage.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 900px;\r\n  margin: 3rem auto;\r\n  padding: 0 1rem;\r\n`;\r\nconst Tabs = styled.div`\r\n  display: flex;\r\n  gap: 2rem;\r\n  border-bottom: 2px solid #e0e0e0;\r\n  margin-bottom: 2rem;\r\n`;\r\nconst Tab = styled.button`\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  padding: 0.6rem 0;\r\n  color: ${p => (p.active === \"true\" ? \"#175dff\" : \"#777\")};\r\n  border-bottom: 3px solid ${p => (p.active === \"true\" ? \"#175dff\" : \"transparent\")};\r\n`;\r\nconst Section = styled.div`\r\n  animation: fade 0.3s;\r\n  @keyframes fade { from { opacity: 0 } to { opacity: 1 } }\r\n`;\r\nconst FormGroup = styled.div`\r\n  margin-bottom: 1rem;\r\n`;\r\nconst Label = styled.label`\r\n  display: block;\r\n  margin-bottom: 0.3rem;\r\n  color: #003b70;\r\n  font-weight: 600;\r\n`;\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 0.6rem;\r\n  border: 1px solid #d1e0ff;\r\n  border-radius: 6px;\r\n`;\r\nconst SaveButton = styled.button`\r\n  padding: 0.7rem 1.5rem;\r\n  background: #175dff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  &:hover { background: #004bff; }\r\n`;\r\nconst DeleteButton = styled.button`\r\n  padding: 0.7rem 1.5rem;\r\n  background: #e92365;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  margin-left: 1rem;\r\n  &:hover { background: #ff6b9b; }\r\n`;\r\nconst BookingCard = styled.div`\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n  margin-bottom: 1rem;\r\n`;\r\nconst ReviewInput = styled.textarea`\r\n  width: 100%;\r\n  min-height: 80px;\r\n  padding: 0.5rem;\r\n  margin-top: 0.5rem;\r\n`;\r\nconst SubmitReviewButton = styled.button`\r\n  padding: 0.6rem 1.2rem;\r\n  background: #28a745;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  margin-top: 0.5rem;\r\n`;\r\n\r\nexport default function AccountPage() {\r\n  const [tab, setTab] = useState(\"profile\");\r\n  const [user, setUser] = useState(null);\r\n  const [bookings, setBookings] = useState([]);\r\n  const [reviews, setReviews] = useState({});\r\n  const [newReview, setNewReview] = useState({});\r\n  const [editUser, setEditUser] = useState({\r\n    email: \"\",\r\n    username: \"\",\r\n    password: \"\",\r\n    firstName: \"\",\r\n    lastName: \"\",\r\n    age: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // 1) Load current user on mount\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    if (!token) {\r\n      setError(\"No authentication token found. Redirecting to login...\");\r\n      setLoading(false);\r\n      setTimeout(() => (window.location.href = \"/\"), 2000);\r\n      return;\r\n    }\r\n\r\n    axios\r\n      .get(\"/api/users/me\", { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(res => {\r\n        const u = res.data;\r\n        setUser(u);\r\n        setEditUser({\r\n          email: u.email || \"\",\r\n          username: u.username || \"\",\r\n          password: \"Current password not shown (enter new password to change)\",\r\n          firstName: u.firstName || \"\",\r\n          lastName: u.lastName || \"\",\r\n          age: u.age ? u.age.toString() : \"\",\r\n        });\r\n      })\r\n      .catch(err => {\r\n        setError(`Failed to load profile: ${err.message}`);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  // 2) Once we know user.id, fetch their bookings + reviews\r\n  useEffect(() => {\r\n    if (!user?.id) return;\r\n    const token = localStorage.getItem(\"jwt\");\r\n    axios\r\n      .get(`/api/bookings/user/${user.id}`, { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(res => {\r\n        setBookings(res.data);\r\n        // fetch reviews for each booking\r\n        res.data.forEach(bk => {\r\n          axios\r\n            .get(`/api/reviews/booking/${bk.id}`, { headers: { Authorization: `Bearer ${token}` } })\r\n            .then(r => {\r\n              setReviews(prev => ({ ...prev, [bk.id]: r.data }));\r\n            })\r\n            .catch(() => {\r\n              /* ignore review load failures */\r\n            });\r\n        });\r\n      })\r\n      .catch(err => {\r\n        setError(`Failed to load bookings: ${err.message}`);\r\n      });\r\n  }, [user]);\r\n\r\n  const handleSave = () => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    const payload = {\r\n      email: editUser.email,\r\n      username: editUser.username,\r\n      firstName: editUser.firstName,\r\n      lastName: editUser.lastName,\r\n      age: editUser.age ? parseInt(editUser.age, 10) : undefined,\r\n    };\r\n    if (\r\n      editUser.password.trim() &&\r\n      editUser.password !== \"Current password not shown (enter new password to change)\"\r\n    ) {\r\n      payload.password = editUser.password;\r\n    }\r\n\r\n    axios\r\n      .patch(\"/api/users/me\", payload, { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(res => {\r\n        setUser(res.data);\r\n        alert(\"Profile updated successfully!\");\r\n      })\r\n      .catch(err => {\r\n        setError(`Failed to update profile: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if (!window.confirm(\"Are you sure you want to delete your account?\")) return;\r\n    const token = localStorage.getItem(\"jwt\");\r\n    axios\r\n      .delete(\"/api/users/me\", { headers: { Authorization: `Bearer ${token}` } })\r\n      .then(() => {\r\n        localStorage.removeItem(\"jwt\");\r\n        window.location.href = \"/\";\r\n      })\r\n      .catch(err => {\r\n        setError(`Failed to delete account: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  const handleReviewSubmit = bookingId => {\r\n    const token = localStorage.getItem(\"jwt\");\r\n    axios\r\n      .post(\r\n        \"/api/reviews\",\r\n        {\r\n          bookingId,\r\n          comment: newReview[bookingId] || \"\",\r\n          rating: 5,\r\n        },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      )\r\n      .then(res => {\r\n        setReviews(prev => ({\r\n          ...prev,\r\n          [bookingId]: [res.data, ...(prev[bookingId] || [])],\r\n        }));\r\n        setNewReview(prev => ({ ...prev, [bookingId]: \"\" }));\r\n      })\r\n      .catch(err => {\r\n        setError(`Failed to add review: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <Wrapper>\r\n      <h1>My account</h1>\r\n      <Tabs>\r\n        <Tab active={tab === \"profile\" ? \"true\" : \"false\"} onClick={() => setTab(\"profile\")}>\r\n          Profile\r\n        </Tab>\r\n        <Tab active={tab === \"bookings\" ? \"true\" : \"false\"} onClick={() => setTab(\"bookings\")}>\r\n          My bookings\r\n        </Tab>\r\n      </Tabs>\r\n\r\n      {error && <p style={{ color: \"#e92365\" }}>{error}</p>}\r\n\r\n      {tab === \"profile\" && user && (\r\n        <Section>\r\n          <h2>Edit details</h2>\r\n          <FormGroup>\r\n            <Label>Email</Label>\r\n            <Input\r\n              value={editUser.email}\r\n              onChange={e => setEditUser({ ...editUser, email: e.target.value })}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label>Username</Label>\r\n            <Input\r\n              value={editUser.username}\r\n              onChange={e => setEditUser({ ...editUser, username: e.target.value })}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label>Password (enter new to change)</Label>\r\n            <Input\r\n              type=\"text\"\r\n              value={editUser.password}\r\n              onChange={e => setEditUser({ ...editUser, password: e.target.value })}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label>First Name</Label>\r\n            <Input\r\n              value={editUser.firstName}\r\n              onChange={e => setEditUser({ ...editUser, firstName: e.target.value })}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label>Last Name</Label>\r\n            <Input\r\n              value={editUser.lastName}\r\n              onChange={e => setEditUser({ ...editUser, lastName: e.target.value })}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label>Age</Label>\r\n            <Input\r\n              type=\"number\"\r\n              value={editUser.age}\r\n              onChange={e => setEditUser({ ...editUser, age: e.target.value })}\r\n            />\r\n          </FormGroup>\r\n          <FormGroup>\r\n            <Label>Role (read-only)</Label>\r\n            <Input value={user.role} disabled />\r\n          </FormGroup>\r\n          <SaveButton onClick={handleSave}>Save Changes</SaveButton>\r\n          <DeleteButton onClick={handleDelete}>Delete Account</DeleteButton>\r\n        </Section>\r\n      )}\r\n\r\n      {tab === \"bookings\" && (\r\n        <Section>\r\n          <h2>Upcoming & past trips</h2>\r\n          {bookings.length ? (\r\n            bookings.map(booking => (\r\n              <BookingCard key={booking.id}>\r\n                <h3>\r\n                  {booking.listing?.title || \"Unknown\"} ({booking.type})\r\n                </h3>\r\n                <p>\r\n                  Check-in: {booking.checkIn} | Check-out: {booking.checkOut}\r\n                </p>\r\n                <p>\r\n                  Total: â‚¬\r\n                  {booking.listing?.price * (booking.numGuests || 1) || \"N/A\"}\r\n                </p>\r\n                <p>Status: {booking.status}</p>\r\n                <ReviewInput\r\n                  value={newReview[booking.id] || \"\"}\r\n                  onChange={e =>\r\n                    setNewReview({ ...newReview, [booking.id]: e.target.value })\r\n                  }\r\n                  placeholder=\"Add a review...\"\r\n                />\r\n                <SubmitReviewButton onClick={() => handleReviewSubmit(booking.id)}>\r\n                  Submit Review\r\n                </SubmitReviewButton>\r\n                {reviews[booking.id]?.length > 0 && (\r\n                  <div>\r\n                    <h4>Reviews</h4>\r\n                    {reviews[booking.id].map(r => (\r\n                      <p key={r.id}>{r.comment}</p>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </BookingCard>\r\n            ))\r\n          ) : (\r\n            <p>You have no bookings yet.</p>\r\n          )}\r\n        </Section>\r\n      )}\r\n    </Wrapper>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}