{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Calina\\\\Desktop\\\\ANUL3\\\\sem2\\\\SD\\\\proiect\\\\bookify-frontend\\\\src\\\\pages\\\\CategoryPage.jsx\",\n  _s = $RefreshSig$();\n// src/pages/CategoryPage.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport styled, { keyframes } from \"styled-components\";\nimport { FaCalendarAlt } from \"react-icons/fa\";\nimport Header from \"../components/Header\";\n\n/* ── animations ───────────────────────────────── */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fade = keyframes`from{opacity:0;transform:translateY(15px);}to{opacity:1;transform:translateY(0);}`;\nconst fadeIn = keyframes`from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}`;\n\n/* ── layout ─────────────────────────────────────── */\nconst Wrapper = styled.div`padding:2rem;animation:${fade}.5s ease-out;`;\n_c = Wrapper;\nconst FilterBar = styled.div`\n  display:flex; align-items:center; gap:1rem; margin-bottom:1.6rem; flex-wrap:wrap;\n`;\n_c2 = FilterBar;\nconst Select = styled.select`padding:.55rem; font-size:1rem; min-width:160px;`;\n_c3 = Select;\nconst DateInput = styled.input`padding:.55rem; font-size:1rem; min-width:145px;`;\n_c4 = DateInput;\nconst Grid = styled.div`\n  display:grid; gap:1.6rem;\n  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));\n`;\n_c5 = Grid;\nconst Card = styled.div`\n  border-radius:12px; overflow:hidden; cursor:pointer;\n  box-shadow:0 4px 12px rgba(0,0,0,.1); transition:transform .25s;\n  &:hover{transform:translateY(-4px);}\n`;\n_c6 = Card;\nconst Img = styled.img`width:100%; height:160px; object-fit:cover; display:block;`;\n_c7 = Img;\nconst Info = styled.div`padding:1rem; background:#fff;`;\n_c8 = Info;\nconst Title = styled.h3`margin:0 0 .45rem; font-size:1.2rem;`;\n_c9 = Title;\nconst Detail = styled.p`margin:.25rem 0; font-size:.95rem; color:#333;`;\n\n/* ── detail-modal ───────────────────────────────── */\n_c0 = Detail;\nconst Modal = styled.div`\n  position:fixed; inset:0; background:rgba(0,0,0,.5);\n  display:${p => p.open ? \"flex\" : \"none\"}; align-items:center; justify-content:center;\n  z-index:1000; animation:${fadeIn}.3s ease-out;\n`;\n_c1 = Modal;\nconst Content = styled.div`\n  width:90%; max-width:600px; background:#fff; border-radius:12px;\n  overflow-y:auto; max-height:90vh; padding:1.5rem; position:relative;\n`;\n_c10 = Content;\nconst CloseBtn = styled.button`\n  position:absolute; top:1rem; right:1rem; background:transparent;\n  border:none; font-size:1.5rem; cursor:pointer;\n`;\n_c11 = CloseBtn;\nconst Section = styled.div`margin-bottom:1.5rem;`;\n_c12 = Section;\nconst Label = styled.span`font-weight:700; color:#175dff; margin-right:.6rem;`;\n_c13 = Label;\nconst H2 = styled.h2`margin:1rem 0 .5rem; font-size:1.6rem; color:#003b70;`;\n_c14 = H2;\nconst TextArea = styled.textarea`\n  width:100%; height:80px; margin-top:.5rem; padding:.5rem; font-size:1rem;\n`;\n_c15 = TextArea;\nconst Btn = styled.button`\n  padding:.7rem 1.2rem; margin-top:.8rem; border:none; border-radius:6px;\n  background:#175dff; color:#fff; font-weight:600; cursor:pointer; transition:.2s;\n  &:hover{background:#004bff;}\n`;\n_c16 = Btn;\nconst ErrorMsg = styled.p`color:#e92365; margin-top:.5rem;`;\n\n/* ── helpers ───────────────────────────────────── */\n_c17 = ErrorMsg;\nconst iso = d => d && new Date(d).toISOString().split(\"T\")[0];\n\n/* ── main component ────────────────────────────── */\nexport default function CategoryPage({\n  category\n}) {\n  _s();\n  const [items, setItems] = useState([]);\n  const [countries, setCountries] = useState([]);\n  const [country, setCountry] = useState(\"\");\n  const [from, setFromDate] = useState(\"\");\n  const [to, setToDate] = useState(\"\");\n  const [selected, setSelected] = useState(null); // the item you clicked\n  const [reviews, setReviews] = useState([]);\n  const [newReview, setNewReview] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n  const token = localStorage.getItem(\"jwt\");\n\n  /* 1) load list on mount / category change */\n  useEffect(() => {\n    (async () => {\n      if (!token) return alert(\"Please log in.\");\n      const res = await fetch(`/api/listings/${category}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (res.status === 401) return alert(\"Session expired.\");\n      if (!res.ok) throw new Error(await res.text());\n      const data = await res.json();\n      setItems(data);\n      setCountries([...new Set(data.map(i => i.country))]);\n    })().catch(e => {\n      console.error(e);\n      alert(\"Could not load items.\");\n    });\n  }, [category, token]);\n\n  /* 2) filter by country + window */\n  const inWindow = itm => {\n    var _ref, _itm$availableFrom, _ref2, _itm$availableTo;\n    if (!from || !to) return true;\n    const start = new Date(from),\n      end = new Date(to);\n    const aFrom = new Date((_ref = (_itm$availableFrom = itm.availableFrom) !== null && _itm$availableFrom !== void 0 ? _itm$availableFrom : itm.departureTime) !== null && _ref !== void 0 ? _ref : itm.eventDate);\n    const aTo = new Date((_ref2 = (_itm$availableTo = itm.availableTo) !== null && _itm$availableTo !== void 0 ? _itm$availableTo : itm.arrivalTime) !== null && _ref2 !== void 0 ? _ref2 : itm.eventDate);\n    return start <= aTo && end >= aFrom;\n  };\n  const shown = items.filter(i => (!country || i.country === country) && inWindow(i));\n\n  /* 3) open detail + fetch reviews */\n  const openDetail = async itm => {\n    setSelected(itm);\n    setError(\"\");\n    setNewReview(\"\");\n    if (!token) return;\n    const r = await fetch(`/api/reviews/${category}/${itm.id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    if (r.ok) setReviews(await r.json());\n  };\n\n  /* 4) booking helper */\n  const postOne = (listing, type, ci, co) => fetch(\"/api/bookings\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      userId: 1,\n      // TODO real user\n      listingId: listing.id,\n      type,\n      type,\n      checkIn: ci,\n      checkOut: co,\n      numGuests: 2,\n      payNow: true\n    })\n  });\n\n  /* 5) handle “Book now” inside modal */\n  const handleBook = async () => {\n    if (!selected) return;\n    const ci = !from || category !== \"hotels\" ? null : iso(from);\n    const co = !to || category !== \"hotels\" ? null : iso(to);\n    try {\n      const promises = [postOne(selected, category.toUpperCase(), ci, co)];\n      const resps = await Promise.all(promises);\n      for (let r of resps) if (!r.ok) throw new Error(r.statusText);\n      alert(\"✅ Booking confirmed! Check your email.\");\n      setSelected(null);\n    } catch (e) {\n      setError(e.message);\n    }\n  };\n\n  /* 6) submit review */\n  const submitReview = async () => {\n    if (!newReview.trim()) return;\n    const r = await fetch(`/api/reviews/${category}/${selected.id}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        text: newReview\n      })\n    });\n    if (r.ok) {\n      const saved = await r.json();\n      setReviews([saved, ...reviews]);\n      setNewReview(\"\");\n    } else {\n      alert(\"Failed to post review\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [/*#__PURE__*/_jsxDEV(FilterBar, {\n        children: [/*#__PURE__*/_jsxDEV(Select, {\n          value: country,\n          onChange: e => setCountry(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All countries\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), countries.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: c,\n            children: c\n          }, c, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DateInput, {\n          type: \"date\",\n          value: from,\n          onChange: e => setFromDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DateInput, {\n          type: \"date\",\n          value: to,\n          onChange: e => setToDate(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FaCalendarAlt, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        children: shown.map(it => /*#__PURE__*/_jsxDEV(Card, {\n          onClick: () => openDetail(it),\n          children: [(it.imageUrl || it.photo) && /*#__PURE__*/_jsxDEV(Img, {\n            src: it.imageUrl || it.photo,\n            alt: it.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Info, {\n            children: [/*#__PURE__*/_jsxDEV(Title, {\n              children: it.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this), category === \"flights\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Detail, {\n                children: [it.departure, \"\\u2192\", it.arrival]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Detail, {\n                children: [\"Seats left: \", it.seatCapacity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), category === \"hotels\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Detail, {\n                children: it.city\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Detail, {\n                children: [\"Rooms: \", it.totalRooms]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), category === \"events\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Detail, {\n                children: new Date(it.eventDate).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Detail, {\n                children: [\"Venue: \", it.venue]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)]\n        }, it.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: !!selected,\n      children: /*#__PURE__*/_jsxDEV(Content, {\n        children: [/*#__PURE__*/_jsxDEV(CloseBtn, {\n          onClick: () => setSelected(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), selected && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(H2, {\n            children: selected.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), category === \"hotels\" && /*#__PURE__*/_jsxDEV(Section, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Dates:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(DateInput, {\n              type: \"date\",\n              value: from,\n              onChange: e => setFromDate(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), \" \", \"\\u2192\", \" \", /*#__PURE__*/_jsxDEV(DateInput, {\n              type: \"date\",\n              value: to,\n              onChange: e => setToDate(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: selected.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Btn, {\n            onClick: handleBook,\n            children: \"Book Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(ErrorMsg, {\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(Section, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Reviews:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n              placeholder: \"Write your review\\u2026\",\n              value: newReview,\n              onChange: e => setNewReview(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Btn, {\n              onClick: submitReview,\n              children: \"Post Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), reviews.map(r => /*#__PURE__*/_jsxDEV(Section, {\n            children: /*#__PURE__*/_jsxDEV(Detail, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [r.user.firstName, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 25\n              }, this), \" \", r.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this)\n          }, r.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(CategoryPage, \"h+kPOt/0TX/rB/HYhUqPAgt11aw=\", false, function () {\n  return [useNavigate];\n});\n_c18 = CategoryPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18;\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"FilterBar\");\n$RefreshReg$(_c3, \"Select\");\n$RefreshReg$(_c4, \"DateInput\");\n$RefreshReg$(_c5, \"Grid\");\n$RefreshReg$(_c6, \"Card\");\n$RefreshReg$(_c7, \"Img\");\n$RefreshReg$(_c8, \"Info\");\n$RefreshReg$(_c9, \"Title\");\n$RefreshReg$(_c0, \"Detail\");\n$RefreshReg$(_c1, \"Modal\");\n$RefreshReg$(_c10, \"Content\");\n$RefreshReg$(_c11, \"CloseBtn\");\n$RefreshReg$(_c12, \"Section\");\n$RefreshReg$(_c13, \"Label\");\n$RefreshReg$(_c14, \"H2\");\n$RefreshReg$(_c15, \"TextArea\");\n$RefreshReg$(_c16, \"Btn\");\n$RefreshReg$(_c17, \"ErrorMsg\");\n$RefreshReg$(_c18, \"CategoryPage\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","styled","keyframes","FaCalendarAlt","Header","jsxDEV","_jsxDEV","Fragment","_Fragment","fade","fadeIn","Wrapper","div","_c","FilterBar","_c2","Select","select","_c3","DateInput","input","_c4","Grid","_c5","Card","_c6","Img","img","_c7","Info","_c8","Title","h3","_c9","Detail","p","_c0","Modal","open","_c1","Content","_c10","CloseBtn","button","_c11","Section","_c12","Label","span","_c13","H2","h2","_c14","TextArea","textarea","_c15","Btn","_c16","ErrorMsg","_c17","iso","d","Date","toISOString","split","CategoryPage","category","_s","items","setItems","countries","setCountries","country","setCountry","from","setFromDate","to","setToDate","selected","setSelected","reviews","setReviews","newReview","setNewReview","error","setError","navigate","token","localStorage","getItem","alert","res","fetch","headers","Authorization","status","ok","Error","text","data","json","Set","map","i","catch","e","console","inWindow","itm","_ref","_itm$availableFrom","_ref2","_itm$availableTo","start","end","aFrom","availableFrom","departureTime","eventDate","aTo","availableTo","arrivalTime","shown","filter","openDetail","r","id","postOne","listing","type","ci","co","method","body","JSON","stringify","userId","listingId","checkIn","checkOut","numGuests","payNow","handleBook","promises","toUpperCase","resps","Promise","all","statusText","message","submitReview","trim","saved","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","c","it","onClick","imageUrl","photo","src","alt","title","departure","arrival","seatCapacity","city","totalRooms","toLocaleDateString","venue","description","placeholder","user","firstName","_c18","$RefreshReg$"],"sources":["C:/Users/Calina/Desktop/ANUL3/sem2/SD/proiect/bookify-frontend/src/pages/CategoryPage.jsx"],"sourcesContent":["// src/pages/CategoryPage.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate }            from \"react-router-dom\";\r\nimport styled, { keyframes }      from \"styled-components\";\r\nimport { FaCalendarAlt }          from \"react-icons/fa\";\r\nimport Header                     from \"../components/Header\";\r\n\r\n/* ── animations ───────────────────────────────── */\r\nconst fade     = keyframes`from{opacity:0;transform:translateY(15px);}to{opacity:1;transform:translateY(0);}`;\r\nconst fadeIn   = keyframes`from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}`;\r\n\r\n/* ── layout ─────────────────────────────────────── */\r\nconst Wrapper   = styled.div`padding:2rem;animation:${fade}.5s ease-out;`;\r\nconst FilterBar = styled.div`\r\n  display:flex; align-items:center; gap:1rem; margin-bottom:1.6rem; flex-wrap:wrap;\r\n`;\r\nconst Select    = styled.select`padding:.55rem; font-size:1rem; min-width:160px;`;\r\nconst DateInput = styled.input`padding:.55rem; font-size:1rem; min-width:145px;`;\r\n\r\nconst Grid      = styled.div`\r\n  display:grid; gap:1.6rem;\r\n  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));\r\n`;\r\nconst Card      = styled.div`\r\n  border-radius:12px; overflow:hidden; cursor:pointer;\r\n  box-shadow:0 4px 12px rgba(0,0,0,.1); transition:transform .25s;\r\n  &:hover{transform:translateY(-4px);}\r\n`;\r\nconst Img       = styled.img`width:100%; height:160px; object-fit:cover; display:block;`;\r\nconst Info      = styled.div`padding:1rem; background:#fff;`;\r\nconst Title     = styled.h3`margin:0 0 .45rem; font-size:1.2rem;`;\r\nconst Detail    = styled.p`margin:.25rem 0; font-size:.95rem; color:#333;`;\r\n\r\n/* ── detail-modal ───────────────────────────────── */\r\nconst Modal     = styled.div`\r\n  position:fixed; inset:0; background:rgba(0,0,0,.5);\r\n  display:${p=>p.open?\"flex\":\"none\"}; align-items:center; justify-content:center;\r\n  z-index:1000; animation:${fadeIn}.3s ease-out;\r\n`;\r\nconst Content   = styled.div`\r\n  width:90%; max-width:600px; background:#fff; border-radius:12px;\r\n  overflow-y:auto; max-height:90vh; padding:1.5rem; position:relative;\r\n`;\r\nconst CloseBtn  = styled.button`\r\n  position:absolute; top:1rem; right:1rem; background:transparent;\r\n  border:none; font-size:1.5rem; cursor:pointer;\r\n`;\r\nconst Section   = styled.div`margin-bottom:1.5rem;`;\r\nconst Label     = styled.span`font-weight:700; color:#175dff; margin-right:.6rem;`;\r\nconst H2        = styled.h2`margin:1rem 0 .5rem; font-size:1.6rem; color:#003b70;`;\r\nconst TextArea  = styled.textarea`\r\n  width:100%; height:80px; margin-top:.5rem; padding:.5rem; font-size:1rem;\r\n`;\r\nconst Btn       = styled.button`\r\n  padding:.7rem 1.2rem; margin-top:.8rem; border:none; border-radius:6px;\r\n  background:#175dff; color:#fff; font-weight:600; cursor:pointer; transition:.2s;\r\n  &:hover{background:#004bff;}\r\n`;\r\nconst ErrorMsg  = styled.p`color:#e92365; margin-top:.5rem;`;\r\n\r\n/* ── helpers ───────────────────────────────────── */\r\nconst iso = d => d && new Date(d).toISOString().split(\"T\")[0];\r\n\r\n/* ── main component ────────────────────────────── */\r\nexport default function CategoryPage({ category }) {\r\n  const [items,     setItems]     = useState([]);\r\n  const [countries, setCountries] = useState([]);\r\n  const [country,   setCountry]   = useState(\"\");\r\n  const [from,      setFromDate]  = useState(\"\");\r\n  const [to,        setToDate]    = useState(\"\");\r\n  const [selected,  setSelected]  = useState(null);   // the item you clicked\r\n  const [reviews,   setReviews]   = useState([]);\r\n  const [newReview, setNewReview] = useState(\"\");\r\n  const [error,     setError]     = useState(\"\");\r\n  const navigate    = useNavigate();\r\n  const token       = localStorage.getItem(\"jwt\");\r\n\r\n  /* 1) load list on mount / category change */\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!token) return alert(\"Please log in.\");\r\n      const res = await fetch(`/api/listings/${category}`, {\r\n        headers:{ Authorization:`Bearer ${token}` }\r\n      });\r\n      if (res.status === 401) return alert(\"Session expired.\");\r\n      if (!res.ok) throw new Error(await res.text());\r\n      const data = await res.json();\r\n      setItems(data);\r\n      setCountries([...new Set(data.map(i=>i.country))]);\r\n    })().catch(e=>{ console.error(e); alert(\"Could not load items.\"); });\r\n  }, [category, token]);\r\n\r\n  /* 2) filter by country + window */\r\n  const inWindow = itm => {\r\n    if (!from || !to) return true;\r\n    const start = new Date(from), end = new Date(to);\r\n    const aFrom = new Date(itm.availableFrom  ?? itm.departureTime ?? itm.eventDate);\r\n    const aTo   = new Date(itm.availableTo    ?? itm.arrivalTime   ?? itm.eventDate);\r\n    return start <= aTo && end >= aFrom;\r\n  };\r\n  const shown = items.filter(i=>(!country||i.country===country)&&inWindow(i));\r\n\r\n  /* 3) open detail + fetch reviews */\r\n  const openDetail = async itm => {\r\n    setSelected(itm);\r\n    setError(\"\");\r\n    setNewReview(\"\");\r\n    if (!token) return;\r\n    const r = await fetch(`/api/reviews/${category}/${itm.id}`, {\r\n      headers:{ Authorization:`Bearer ${token}` }\r\n    });\r\n    if (r.ok) setReviews(await r.json());\r\n  };\r\n\r\n  /* 4) booking helper */\r\n  const postOne = (listing,type,ci,co) => fetch(\"/api/bookings\",{\r\n    method:\"POST\",\r\n    headers:{\r\n      \"Content-Type\":\"application/json\",\r\n      Authorization:`Bearer ${token}`\r\n    },\r\n    body:JSON.stringify({\r\n      userId:1,   // TODO real user\r\n      listingId:listing.id,\r\n      type,type,\r\n      checkIn:ci, checkOut:co,\r\n      numGuests:2, payNow:true\r\n    })\r\n  });\r\n\r\n  /* 5) handle “Book now” inside modal */\r\n  const handleBook = async () => {\r\n    if (!selected) return;\r\n    const ci = !from||category!==\"hotels\" ? null : iso(from);\r\n    const co = !to  ||category!==\"hotels\" ? null : iso(to);\r\n    try {\r\n      const promises = [\r\n        postOne(selected, category.toUpperCase(), ci, co)\r\n      ];\r\n      const resps = await Promise.all(promises);\r\n      for(let r of resps) if(!r.ok) throw new Error(r.statusText);\r\n      alert(\"✅ Booking confirmed! Check your email.\");\r\n      setSelected(null);\r\n    } catch(e) {\r\n      setError(e.message);\r\n    }\r\n  };\r\n\r\n  /* 6) submit review */\r\n  const submitReview = async () => {\r\n    if (!newReview.trim()) return;\r\n    const r = await fetch(`/api/reviews/${category}/${selected.id}`, {\r\n      method:\"POST\",\r\n      headers:{\r\n        \"Content-Type\":\"application/json\",\r\n        Authorization:`Bearer ${token}`\r\n      },\r\n      body:JSON.stringify({ text:newReview })\r\n    });\r\n    if (r.ok) {\r\n      const saved = await r.json();\r\n      setReviews([saved, ...reviews]);\r\n      setNewReview(\"\");\r\n    } else {\r\n      alert(\"Failed to post review\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header/>\r\n      <Wrapper>\r\n\r\n        {/* ─ filters ─ */}\r\n        <FilterBar>\r\n          <Select value={country}\r\n                  onChange={e=>setCountry(e.target.value)}>\r\n            <option value=\"\">All countries</option>\r\n            {countries.map(c=>\r\n              <option key={c} value={c}>{c}</option>\r\n            )}\r\n          </Select>\r\n\r\n          <DateInput type=\"date\" value={from}\r\n                     onChange={e=>setFromDate(e.target.value)} />\r\n          <span>→</span>\r\n          <DateInput type=\"date\" value={to}\r\n                     onChange={e=>setToDate(e.target.value)} />\r\n          <FaCalendarAlt/>\r\n        </FilterBar>\r\n\r\n        {/* ─ grid ─ */}\r\n        <Grid>\r\n          {shown.map(it=>(\r\n            <Card key={it.id} onClick={()=>openDetail(it)}>\r\n              {(it.imageUrl||it.photo) &&\r\n                <Img src={it.imageUrl||it.photo} alt={it.title}/>\r\n              }\r\n              <Info>\r\n                <Title>{it.title}</Title>\r\n                {category===\"flights\" && <>\r\n                  <Detail>{it.departure}→{it.arrival}</Detail>\r\n                  <Detail>Seats left: {it.seatCapacity}</Detail>\r\n                </>}\r\n                {category===\"hotels\" && <>\r\n                  <Detail>{it.city}</Detail>\r\n                  <Detail>Rooms: {it.totalRooms}</Detail>\r\n                </>}\r\n                {category===\"events\" && <>\r\n                  <Detail>{new Date(it.eventDate).toLocaleDateString()}</Detail>\r\n                  <Detail>Venue: {it.venue}</Detail>\r\n                </>}\r\n              </Info>\r\n            </Card>\r\n          ))}\r\n        </Grid>\r\n      </Wrapper>\r\n\r\n      {/* ─ detail modal ─ */}\r\n      <Modal open={!!selected}>\r\n        <Content>\r\n          <CloseBtn onClick={()=>setSelected(null)}>×</CloseBtn>\r\n          {selected && <>\r\n            <H2>{selected.title}</H2>\r\n            {/* for hotels show date window */}\r\n            {category===\"hotels\" && (\r\n              <Section>\r\n                <Label>Dates:</Label>\r\n                <DateInput\r\n                  type=\"date\" value={from}\r\n                  onChange={e=>setFromDate(e.target.value)}\r\n                />{\" \"}\r\n                →{\" \"}\r\n                <DateInput\r\n                  type=\"date\" value={to}\r\n                  onChange={e=>setToDate(e.target.value)}\r\n                />\r\n              </Section>\r\n            )}\r\n            {/* common description */}\r\n            <Section>\r\n              <p>{selected.description}</p>\r\n            </Section>\r\n            <Btn onClick={handleBook}>Book Now</Btn>\r\n            {error && <ErrorMsg>{error}</ErrorMsg>}\r\n\r\n            {/* reviews */}\r\n            <Section>\r\n              <Label>Reviews:</Label>\r\n              <TextArea\r\n                placeholder=\"Write your review…\"\r\n                value={newReview}\r\n                onChange={e=>setNewReview(e.target.value)}\r\n              />\r\n              <Btn onClick={submitReview}>Post Review</Btn>\r\n            </Section>\r\n            {reviews.map(r=>(\r\n              <Section key={r.id}>\r\n                <Detail><strong>{r.user.firstName}:</strong> {r.text}</Detail>\r\n              </Section>\r\n            ))}\r\n          </>}\r\n        </Content>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}