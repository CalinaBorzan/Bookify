{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Calina\\\\Desktop\\\\ANUL3\\\\sem2\\\\SD\\\\proiect\\\\bookify-frontend\\\\src\\\\pages\\\\ResetPasswordPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\n\n/**\r\n * ResetPasswordPage – handles the link the user receives by e-mail\r\n *   URL format →  /reset-password?email=...&token=...\r\n *   ↳ Displays New-Password + Confirm fields\r\n *   ↳ POSTs to  /api/auth/reset-password  with { email, token, newPassword }\r\n */\n\n//— styling kept minimal; reuse card look\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background: #d8edff; /* baby blue */\n`;\n_c = Wrapper;\nconst Card = styled.div`\n  width: 100%;\n  max-width: 420px;\n  padding: 2.5rem 2rem;\n  border-radius: 18px;\n  background: #b4d0ff; /* deeper blue */\n  box-shadow: 0 12px 26px rgba(0, 59, 112, 0.18);\n`;\n_c2 = Card;\nconst Title = styled.h2`\n  text-align: center;\n  color: #003b70;\n  margin-bottom: 1.5rem;\n`;\n_c3 = Title;\nconst Input = styled.input`\n  width: 100%;\n  margin-bottom: 1.2rem;\n  padding: 0.9rem 1rem;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n  border-radius: 8px;\n  background: #e6f2ff;\n  &::placeholder { color: #4d6b9a; }\n`;\n_c4 = Input;\nconst Button = styled.button`\n  width: 100%;\n  padding: 1rem;\n  border: none;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #175dff, #1c8bff);\n  color: #fff;\n  font-weight: 600;\n  cursor: pointer;\n`;\n_c5 = Button;\nconst Msg = styled.div`\n  margin-bottom: 1rem;\n  padding: 0.85rem 1rem;\n  border-radius: 8px;\n  font-size: 0.95rem;\n  color: ${p => p.error ? \"#b00020\" : \"#0e7a29\"};\n  background: ${p => p.error ? \"#ffe6e6\" : \"#e4ffea\"};\n`;\n_c6 = Msg;\nexport default function ResetPasswordPage() {\n  _s();\n  const {\n    search\n  } = useLocation();\n  const navigate = useNavigate();\n  const qs = new URLSearchParams(search);\n  const email = qs.get(\"email\") || \"\";\n  const token = qs.get(\"token\") || \"\";\n  const [form, setForm] = useState({\n    newPassword: \"\",\n    confirm: \"\"\n  });\n  const [msg, setMsg] = useState({\n    text: \"\",\n    error: false\n  });\n  useEffect(() => {\n    if (!email || !token) {\n      setMsg({\n        text: \"Invalid reset link.\",\n        error: true\n      });\n    }\n  }, [email, token]);\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (form.newPassword !== form.confirm) {\n      return setMsg({\n        text: \"Passwords do not match\",\n        error: true\n      });\n    }\n    try {\n      await axios.post(\"/api/auth/reset-password\", {\n        email,\n        token,\n        newPassword: form.newPassword\n      });\n      setMsg({\n        text: \"Password reset! You can log in now.\",\n        error: false\n      });\n      setTimeout(() => navigate(\"/\"), 2000);\n    } catch (err) {\n      var _err$response;\n      setMsg({\n        text: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || \"Reset failed – link may be expired.\",\n        error: true\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Wrapper, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"Set new password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), msg.text && /*#__PURE__*/_jsxDEV(Msg, {\n        error: msg.error,\n        children: msg.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          name: \"newPassword\",\n          placeholder: \"New password\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          name: \"confirm\",\n          placeholder: \"Confirm password\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          children: \"Reset password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n_s(ResetPasswordPage, \"zGquj/xmirVoPqGqvzjMT17jIzE=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c7 = ResetPasswordPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"Wrapper\");\n$RefreshReg$(_c2, \"Card\");\n$RefreshReg$(_c3, \"Title\");\n$RefreshReg$(_c4, \"Input\");\n$RefreshReg$(_c5, \"Button\");\n$RefreshReg$(_c6, \"Msg\");\n$RefreshReg$(_c7, \"ResetPasswordPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","styled","axios","jsxDEV","_jsxDEV","Wrapper","div","_c","Card","_c2","Title","h2","_c3","Input","input","_c4","Button","button","_c5","Msg","p","error","_c6","ResetPasswordPage","_s","search","navigate","qs","URLSearchParams","email","get","token","form","setForm","newPassword","confirm","msg","setMsg","text","handleChange","e","target","name","value","handleSubmit","preventDefault","post","setTimeout","err","_err$response","response","data","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","required","onChange","_c7","$RefreshReg$"],"sources":["C:/Users/Calina/Desktop/ANUL3/sem2/SD/proiect/bookify-frontend/src/pages/ResetPasswordPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\n\r\n/**\r\n * ResetPasswordPage – handles the link the user receives by e-mail\r\n *   URL format →  /reset-password?email=...&token=...\r\n *   ↳ Displays New-Password + Confirm fields\r\n *   ↳ POSTs to  /api/auth/reset-password  with { email, token, newPassword }\r\n */\r\n\r\n//— styling kept minimal; reuse card look\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 100vh;\r\n  background: #d8edff; /* baby blue */\r\n`;\r\nconst Card = styled.div`\r\n  width: 100%;\r\n  max-width: 420px;\r\n  padding: 2.5rem 2rem;\r\n  border-radius: 18px;\r\n  background: #b4d0ff; /* deeper blue */\r\n  box-shadow: 0 12px 26px rgba(0, 59, 112, 0.18);\r\n`;\r\nconst Title = styled.h2`\r\n  text-align: center;\r\n  color: #003b70;\r\n  margin-bottom: 1.5rem;\r\n`;\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  margin-bottom: 1.2rem;\r\n  padding: 0.9rem 1rem;\r\n  border: 1px solid rgba(0, 0, 0, 0.05);\r\n  border-radius: 8px;\r\n  background: #e6f2ff;\r\n  &::placeholder { color: #4d6b9a; }\r\n`;\r\nconst Button = styled.button`\r\n  width: 100%;\r\n  padding: 1rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  background: linear-gradient(135deg, #175dff, #1c8bff);\r\n  color: #fff;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n`;\r\nconst Msg = styled.div`\r\n  margin-bottom: 1rem;\r\n  padding: 0.85rem 1rem;\r\n  border-radius: 8px;\r\n  font-size: 0.95rem;\r\n  color: ${(p) => (p.error ? \"#b00020\" : \"#0e7a29\")};\r\n  background: ${(p) => (p.error ? \"#ffe6e6\" : \"#e4ffea\")};\r\n`;\r\n\r\nexport default function ResetPasswordPage() {\r\n  const { search } = useLocation();\r\n  const navigate = useNavigate();\r\n  const qs = new URLSearchParams(search);\r\n  const email = qs.get(\"email\") || \"\";\r\n  const token = qs.get(\"token\") || \"\";\r\n\r\n  const [form, setForm] = useState({ newPassword: \"\", confirm: \"\" });\r\n  const [msg, setMsg] = useState({ text: \"\", error: false });\r\n\r\n  useEffect(() => {\r\n    if (!email || !token) {\r\n      setMsg({ text: \"Invalid reset link.\", error: true });\r\n    }\r\n  }, [email, token]);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (form.newPassword !== form.confirm) {\r\n      return setMsg({ text: \"Passwords do not match\", error: true });\r\n    }\r\n    try {\r\n      await axios.post(\"/api/auth/reset-password\", {\r\n        email,\r\n        token,\r\n        newPassword: form.newPassword,\r\n      });\r\n      setMsg({ text: \"Password reset! You can log in now.\", error: false });\r\n      setTimeout(() => navigate(\"/\"), 2000);\r\n    } catch (err) {\r\n      setMsg({\r\n        text: err.response?.data || \"Reset failed – link may be expired.\",\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Card>\r\n        <Title>Set new password</Title>\r\n        {msg.text && <Msg error={msg.error}>{msg.text}</Msg>}\r\n        <form onSubmit={handleSubmit}>\r\n          <Input\r\n            type=\"password\"\r\n            name=\"newPassword\"\r\n            placeholder=\"New password\"\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <Input\r\n            type=\"password\"\r\n            name=\"confirm\"\r\n            placeholder=\"Confirm password\"\r\n            required\r\n            onChange={handleChange}\r\n          />\r\n          <Button type=\"submit\">Reset password</Button>\r\n        </form>\r\n      </Card>\r\n    </Wrapper>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}